{% extends "layout.html" %}
{% block content %}
<head>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<style>
    .recipe_image img {
        display: inline-block;
        left: 0;
        border-top-left-radius: 7px;
        border-bottom-left-radius: 7px;
        object-fit: cover;
	    overflow: hidden;
    }

    .recipe_image {
        display: inline-block;
        height: auto;
        left: 0;
    }

    .search_result {
        margin-top: 30%;
        margin-bottom: 5%;
        position: relative;
    }

    .search_result .wrapper {
        padding: 0 20px 0px 0px;
        border-radius: 7px;
        padding-left: 0;
        height: 12.5em;
        width: 30em;
        display: inline-block;
    }

    .search_result ul {
        margin-left: 10%;
    }

    .search_result .contents {
        margin-top: -5%;
        margin-left: 29%;
    }

    .search_result .title {
        top: 0;
        font-size: 24px;
        margin: 0 0 5% 35%;
        text-align: left;
    }

    .search_result a {
        right: 1.2em;
        top: 11em;
        position: absolute;
        margin-bottom: 0;
    }

    .search_result .contents {
        font-size: 16px;
    }

    .search_result .recipe_image {
        position: absolute;
    }

</style>

<form action="/search" method="GET">
    <h2>Recipe Search</h2>
</form>
<form action="/search" method="POST">
    <p>Number of recipes found for <b>{{ searchbar }}: 1</b></p>
    <div class="search_result">
        <div class="wrapper">
            <a href='edamam.com'>From BBC</a>
            <div class="recipe_image">
                <img src="static/img/sampleImage.jpg" alt="image">
            </div>
            <ul>
                <p class="title">
                    <b>Chicken</b>
                </p>
                <ul class="contents">
                    <li>200 Protein</li>
                    <li>200 cal</li>
                    <li>200 servings</li>
                    <li><b>200000000 protein/serving</b></li>
                    <li><b>200 cal/serving</b></li>
                </ul>
            </ul>
        </div>
        <details>
            <summary>Ingredients</summary>
            <ul>
                <div class="wrapper">
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                </div>
            </ul>
        </details>
        <div class="group_btn">
            <form action="/scale_recipe" method="POST">
                <button type="submit" class="small_btn">Scale Recipe</button>
            </form>
            <form action="/calendar" method="POST">
                <button type="submit" class="small_btn">Add to Calendar</button>
            </form>
            <form action="/cart" method="POST">
                <button type="submit" name="recipeURI" class="small_btn">Add to Shopping Cart</button>
            </form>
            <form action="{{ url_for('calorie_tracking') }}" method="POST">
                <button type="submit" class="small_btn">Add to Calorie Tracker</button>
            </form>
        </div>
    </div>

    <div class="search_result">
        <div class="wrapper">
            <a href='edamam.com'>From BBC</a>
            <div class="recipe_image">
                <img src="static/img/sampleImage.jpg" alt="image">
            </div>
            <ul>
                <h2 class="title">
                    <b>Chicken Chicken Chicken Chicken</b>
                </h2>
                <ul class="contents">
                    <li>200 Protein</li>
                    <li>200 cal</li>
                    <li>200 servings</li>
                    <li><b>200000000 protein/serving</b></li>
                    <li><b>200 cal/serving</b></li>
                </ul>
            </ul>
        </div>
        <details>
            <summary>Ingredients</summary>
            <ul>
                <div class="wrapper">
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                    <li>Chicken</li>
                </div>
            </ul>
        </details>
        <div class="group_btn">
            <form action="/scale_recipe" method="POST">
                <button type="submit" class="small_btn">Scale Recipe</button>
            </form>
            <form action="/calendar" method="POST">
                <button type="submit" class="small_btn">Add to Calendar</button>
            </form>
            <form action="/cart" method="POST">
                <button type="submit" name="recipeURI" class="small_btn">Add to Shopping Cart</button>
            </form>
            <form action="{{ url_for('calorie_tracking') }}" method="POST">
                <button type="submit" class="small_btn">Add to Calorie Tracker</button>
            </form>
        </div>
    </div>


{%if success%}
    <p>Nunber of recipes found for <b>{{ searchbar }}:</b> {{ length }}</p>
    {% for recipe in recipes %}

    <div class="search_result"> 
        <div class="wrapper">
            <div class="recipe_image">
                <img src="{{recipe.images}}" alt="image">
            </div>
            <ul>
            <p class="title">
                <b>{{recipe.label}}</b>
            </p>
            <ul class="contents">
                <li>{{recipe.protein}} Protein</li>
                <li>{{recipe.calories}} cal</li>
                <li>{{recipe.servings}} servings</li>
                <li><b>{{recipe.protein_per_serv}} protein/serving</b></li>
                <li><b>{{recipe.cal_per_serv}} cal/serving</b></li>
                <a href='{{recipe.uri}}'>From {{recipe.source}}</a>
            </ul>
        </ul>
        </div>
    <details>
        <summary>Ingredients</summary>
        <ul>
            {% for ingredient in recipe.ingredients %}
            <div class="wrapper">
                <li>{{ingredient}}</li>
            </div>
            {% endfor %}
        </ul>
    </details>
    <div class="group_btn">
        <form action="/scale_recipe" method="POST">
            <button type="submit" class="small_btn">Scale Recipe</button>
        </form>
        <form action="/calendar" method="POST">
            <button type="submit" class="small_btn">Add to Calendar</button>
        </form>
        <form action="/cart" method="POST">
            <button type="submit" name="recipeURI" class="small_btn" >Add to Shopping Cart</button>
        </form>
        <form action="{{ url_for('calorie_tracking') }}" method="POST">
            <button type="submit" class="small_btn">Add to Calorie Tracker</button>
        </form>
    </div>
    {% endfor %}
    </div>
</div>
</form>
{% elif success == false%}
    <style>
        .search_body {
            position: absolute;
            top: 4em;
            left: 5.5em;
        }

        .result {
            margin-top: 40%;
        }
    </style>

{% endif %}
{% endblock %}