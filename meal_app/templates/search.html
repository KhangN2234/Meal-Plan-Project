{% extends "layout.html" %}
{% block content %}
<head>

</head>
    <body>
    <form class="input" action="/search" method="POST">
        <h2>Search</h2>
        <h3>Find a meal plan that works for you</h3>
        <p class="label">I'm looking for....</p>
        <input type="text" class="searchbar" name='searchbar' id="searchbar" placeholder="Chicken Parmesan..."required></input> 
        <select label="Category" name='mealtype' class="mealtype" id="mealtype">
            <option>Breakfast</option>
            <option>Lunch</option>
            <option>Dinner</option>
        </select>
        <input type="submit" value="Search Recipes" class="Submit"></input>
    </form>


{%if success%}
    <p>Results for <b>{{ searchbar }}</b> in <b>{{ mealtype }}</b></p>
    {% for recipe in recipes %}
        <div class="output">
            <ul>
                <li class="title">
                    <p><b>{{ recipe.label }}</b></p>
                    
                    <ul class="contents">
                        <li> {{recipe. protein}}{{recipe. proteinunit}} Protein</li>
                        <li> {{recipe. calories}} cal </li>
                        <li> {{recipe. servings}} servings</li>
                        <li><b> {{recipe. protein_per_serv}}{{recipe. proteinunit}} protein/serving </b></li>
                        <li><b> {{recipe. cal_per_serv}} cal/serving </b></li>
                        <br>
                        <li> <b>Ingredients</b> </li>
                            <ul>
                                {% for ingredient in recipe.ingredients %}
                                    <li>{{ ingredient }}</li>
                                {% endfor %}
                            </ul>

                        <br>
                        <a href='{{recipe. url}}'>From {{recipe. source}}</a>
                    </ul>
                </li>
            </ul>
        </div>
    {% endfor %}
    </body>

{% elif success == false%}
<p>Error.</p>

{% endif %}
{% endblock %}